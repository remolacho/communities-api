---
openapi: 3.0.1
info:
  title: API V1
  version: v1
paths:
  "/{enterprise_subdomain}/v1/categories_petitions/list":
    get:
      summary: List of categories petitions
      tags:
      - Community API V1 Categories Petitions
      description: Allow to users get categories for petitions
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
        '403':
          description: error not logged!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/group_roles/list":
    get:
      summary: List of group of roles
      tags:
      - Community API V1 Group Roles
      description: Allow to users get group of roles
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
        '403':
          description: error not logged!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/petition/answer/{token}/create":
    post:
      summary: Create a new answer for petition
      tags:
      - Community API V1 Answers petition
      description: Allow to users create answer in a petition
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token is the petition information
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '404':
          description: error petition!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '403':
          description: error not logged, not allowed role or the petition is resolved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                answer:
                  type: object
                  properties:
                    message:
                      type: string
  "/{enterprise_subdomain}/v1/petition/answer/delete/{id}":
    delete:
      summary: Delete a answer for petition
      tags:
      - Community API V1 Answers petition
      description: Allow to users create answer in a petition
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: id
        in: path
        description: this identifier unique of the answer
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '403':
          description: error the user not logged !!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '404':
          description: error the answer not belong to user logged !!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/petition/answers/list/{token}":
    get:
      summary: Find all answers of one petition
      tags:
      - Community API V1 Answers petition
      description: Allow to users find all answers of the petition
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token is the petition information
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success lists
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        message:
                          type: string
                        date_at:
                          type: string
                        user:
                          type: object
                          properties:
                            id:
                              type: integer
                            name:
                              type: string
                            lastname:
                              type: string
        '403':
          description: error role not allowed!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '404':
          description: error petition not found!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/petition/create":
    post:
      summary: Create a new petition
      tags:
      - Community API V1 Petitions
      description: Allow to users create petitions
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: object
                    properties:
                      ticket:
                        type: string
        '404':
          description: error category, group_role not found!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '403':
          description: error not logged!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                petition:
                  type: object
                  properties:
                    title:
                      type: string
                    message:
                      type: string
                    category_petition_id:
                      type: integer
                    group_role_id:
                      type: integer
  "/{enterprise_subdomain}/v1/petition/detail/{token}":
    get:
      summary: Find the detail of petition
      tags:
      - Community API V1 Petitions
      description: Allow to users find petition and your detail
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token is the petition information
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                      ticket:
                        type: string
                      token:
                        type: string
                      title:
                        type: string
                      message:
                        type: string
                      status:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                          code:
                            type: string
                          color:
                            type: string
                      category:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                      group_role:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                      user:
                        type: object
                        properties:
                          id:
                            type: integer
                          name:
                            type: string
                          lastname:
                            type: string
        '403':
          description: error role not allowed!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '404':
          description: error petition not found!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/petition/statuses/list/{token}":
    get:
      summary: Find all statuses of one petition
      tags:
      - Community API V1 Statuses petition
      description: Allow to users find all statuses according to petition through
        your state
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token is the petition information
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success lists
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        code:
                          type: string
                        color:
                          type: string
        '403':
          description: error user logged!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '404':
          description: error petition not found!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/petition/update_status/{token}":
    put:
      summary: Change status to petition
      tags:
      - Community API V1 Petitions
      description: Allow to users change of status in the petitions
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token is the petition information
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: Authorization
        in: header
        required: true
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '404':
          description: Error petition not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '403':
          description: error change status allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                petition:
                  type: object
                  properties:
                    status_id:
                      type: integer
  "/{enterprise_subdomain}/v1/users/forgot_password/change/{token}":
    post:
      summary: Change password
      tags:
      - Community API V1 Users
      description: Allow to users do change to password
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: token
        in: path
        description: this token represent the reset_password_key
        required: true
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '404':
          description: error password not match!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                forgot_password:
                  type: object
                  properties:
                    password:
                      type: string
                    password_confirmation:
                      type: string
  "/{enterprise_subdomain}/v1/users/forgot_password":
    post:
      summary: Create a new request for change password
      tags:
      - Community API V1 Users
      description: Allow to users do change to password
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '422':
          description: error email is empty!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '404':
          description: error user not found!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                forgot_password:
                  type: object
                  properties:
                    email:
                      type: string
  "/{enterprise_subdomain}/v1/users/forgot_password/verifier/{token}":
    get:
      summary: Create a new request for verifier token to change password
      tags:
      - Community API V1 Users
      description: Allow to users verifier to change password
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token represent the reset_password_key
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
                  data:
                    type: object
                    properties:
                      token:
                        type: string
        '404':
          description: error token not valid!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/users/list":
    get:
      summary: Request the user list only roles [admin, super admin, manager]
      tags:
      - Community API V1 Users
      description: Allow to users get 1 list of users, the current user should have
        nay the roles [admin, super admin, manager]
      parameters:
      - name: Authorization
        in: header
        required: true
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      - name: attr
        in: query
        description: is optional represent the field of find
        schema:
          type: string
      - name: term
        in: query
        description: is optional represent the value of find
        schema:
          type: string
      - name: page
        in: query
        description: is optional represent the number page of find
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                        name:
                          type: string
                        lastname:
                          type: string
                        email:
                          type: string
                        address:
                          type: string
                          nullable: true
                        identifier:
                          type: string
                        phone:
                          type: string
                          nullable: true
                  paginate:
                    type: object
                    properties:
                      total:
                        type: integer
                      limit:
                        type: integer
                      total_pages:
                        type: integer
                      current_page:
                        type: integer
        '403':
          description: error the user has not role!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/users/profile/show":
    get:
      summary: Find the profile of current user
      tags:
      - Community API V1 Users
      description: Allow see the user's data logged
      parameters:
      - name: Authorization
        in: header
        required: true
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: object
                    properties:
                      id:
                        type: integer
                      name:
                        type: string
                      lastname:
                        type: string
                      email:
                        type: string
                      address:
                        type: string
                        nullable: true
                      identifier:
                        type: string
                      phone:
                        type: string
                        nullable: true
        '403':
          description: error user not valid!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/users/sign_in":
    post:
      summary: Create login by user
      tags:
      - Community API V1 Users
      description: Allow to users enter to api through of the email and password
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  data:
                    type: object
                    properties:
                      jwt:
                        type: string
        '403':
          description: error password or user is not active!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                sign_in:
                  type: object
                  properties:
                    email:
                      type: string
                    password:
                      type: string
  "/{enterprise_subdomain}/v1/users/sign_up/active/{token}":
    get:
      summary: Request activation account
      tags:
      - Community API V1 Users
      description: Allow to users activate account
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: token
        in: path
        description: this token represent the active_key
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '404':
          description: error token not valid!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
  "/{enterprise_subdomain}/v1/users/sign_up":
    post:
      summary: Create user
      tags:
      - Community API V1 Users
      description: Allow create a account in the app
      parameters:
      - name: enterprise_subdomain
        in: path
        description: this subdomain of enterprise create in creations tenant
        required: true
        schema:
          type: string
      - name: lang
        in: query
        description: is optional by default is "es"
        schema:
          type: string
      responses:
        '200':
          description: success!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: true
                  message:
                    type: string
        '404':
          description: error email empty and other attribute!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
        '422':
          description: error user already exists identifier duplicate!!!
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    default: false
                  message:
                    type: string
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                sign_up:
                  type: object
                  properties:
                    name:
                      type: string
                    lastname:
                      type: string
                    identifier:
                      type: string
                    email:
                      type: string
                    phone:
                      type: string
                    address:
                      type: string
                    password:
                      type: string
                    password_confirmation:
                      type: string
servers:
- url: http://localhost:3000
  variables:
    defaultHost:
      default: www.example.com
